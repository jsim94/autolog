{% extends 'site_base.html' %}

{% block title %}Modlog - {{ g.project.name }}{% endblock %}

{% block subcontent %}

{% if g.project.user == g.current_user %}
{% set owner = true %}
{% endif %}

<div class="row">

  <div class="col-lg-6">
    <div id="big-picture" class="carousel slide mb-3" data-bs-ride="false">
      <div class="carousel-inner mb-1">

        {% if g.project.pictures %}
        {% for picture in g.project.pictures %}
        <div class="carousel-item active">
          <img src="{{ url_for('static', filename='assets/project_pictures/'~picture.image_name) }}"
            class="d-block w-100">
        </div>
        {% endfor %}
        <button class="carousel-control-prev" type="button" data-bs-target="#big-picture" data-bs-slide="prev">
          <span class="carousel-control-prev-icon"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#big-picture" data-bs-slide="next">
          <span class="carousel-control-next-icon"></span>
          <span class="visually-hidden">Next</span>
        </button>
        {% else %}
        <div class="carousel-item active">
          <img src="{{ url_for('static', filename='assets/project_pictures/placeholder.jpg') }}" class="d-block w-100">
        </div>
        {% endif %}
      </div>

      <div id="thumbnails" class="row g-2">
        {% if g.project.pictures %}
        {% for picture in g.project.pictures %}
        <div class="col-xl-3 col-4">
          <img class="img-thumbnail w-100" data-bs-target="#big-picture" data-bs-slide-to="{{ loop.index0 }}"
            src="url_for('static', filename='assets/project_pictures/'~picture.image_name) " alt="">
        </div>
        {% endfor %}
        {% endif %}

        {% if owner %}
        <div class="col-xl-3 col-4">
          <a href="#">
            <img class="img-thumbnail w-100" data-bs-target="" data-bs-slide-to="" src="
                  {{ url_for('static', filename='assets/project_pictures/add-thumbnail.jpg') }}" alt="">
          </a>
        </div>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="col-lg-6">
    <h1 class="d-inline">{{ g.project.name }} </h1>
    {% if owner %}
    <a class="btn btn-sm btn-warning" href="{{ url_for('project.edit', project_id=g.project.id) }}">Edit</a>
    <a class="btn btn-sm btn-danger" data-bs-toggle="modal" href="#deleteModal">Delete</a>

    {% endif %}

    <div class=" row">
      <div class="col-lg-6 col-12">
        <h5>Owned by: <a class="text-decoration-none"
            href="{{ url_for('profile.show',username=g.project.user.username) }}">
            @{{g.project.user.username}}</a>
        </h5>
        <p>{{ g.project.description }}</p>

        {% if g.project.mods or owner %}
        <h5>Mods</h5>
        <ul>
          {% if g.project.mods %}
          {% for mod in g.project.mods %}
          <li>{{ mod }}</li>
          {% endfor %}
          {% endif %}

          {% if owner %}
          <li><a href="">add</a></li>
          {% endif %}
        </ul>
        {% endif %}
      </div>

      <div class="col-lg-6 col-12">
        <table class="table">
          <tbody>
            <tr>
              <td>Year</th>
              <td>{{ g.project.year }}</td>
            </tr>
            <tr>
              <td>Make</th>
              <td>{{ g.project.make }}</td>
            </tr>
            <tr>
              <td>Model</th>
              <td>{{ g.project.model }}</td>
            </tr>
            <tr>
              <td>Horsepower</th>
              <td>{{ g.project.horsepower }}hp</td>
            </tr>
            <tr>
              <td>Torque</th>
              <td>{{ g.project.torque}}ft/lb</td>
            </tr>
            <tr>
              <td>Weight</th>
              <td>{{ g.project.weight}}lb</td>
            </tr>
            <tr>
              <td>Power to Weight </th>
              <td>{{ g.project.w2p }}lb/hp</td>
            </tr>
            <tr>
              <td>Drivetrain </th>
              <td>{{ g.project.drivetrain }}</td>
            </tr>
            <tr>
              <td>Engine Size </th>
              <td>{{ g.project.engine_size }}L</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

{% if owner %}
<div class="modal fade" id="deleteModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Are you sure?</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        Please confirm deletion
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <a href="/p/{{g.project.id}}/delete" class="btn btn-danger">Confirm</a>
      </div>
    </div>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"
  integrity="sha512-odNmoc1XJy5x1TMVMdC7EMs3IVdItLPlCeL5vSUPN2llYKMJ2eByTTAIiiuqLg+GdNr9hF6z81p27DArRFKT7A=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="static/ajax.js"></script>
{% endif %}



{% endblock %}